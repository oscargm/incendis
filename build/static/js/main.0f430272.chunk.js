(this.webpackJsonpincendis=this.webpackJsonpincendis||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var a,r,c,o,i=n(1),s=n.n(i),d=n(6),l=n.n(d),u=(n(13),n(14),n(2)),b=function(e,t,n){try{fetch(e).then((function(e){return e.json().then(t)}))}catch(a){n(a)}},f=n(0),h=function(e){return Object(f.jsx)("span",{children:e.text})},j=function(e){var t=e.data,n=e.selectedValue,a=e.selectionTopic,r=e.label,c=e.onChangeEvent;return Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{htmlFor:a,children:r}),Object(f.jsx)("select",{name:a,value:n,onChange:c,children:t.sort().map((function(e){return Object(f.jsx)("option",{value:e,children:e},"".concat(a,"-").concat(e))}))})]})},_={fire_date:{text:"Data",api_field:"data_incendi",vm_field:"fire_date",sortable:!0},region_name:{text:"Comarca",api_field:"comarca",vm_field:"region_name",sortable:!0},municipality_name:{text:"Municipi",api_field:"termemunic",vm_field:"municipality_name",sortable:!0},forest_hectares_burnt:{text:"Ha bosc cremat",api_field:"haarbrades",vm_field:"forest_hectares_burnt",sortable:!0},pasture_hectares_burnt:{text:"Ha pastures cremades",api_field:"hanoarbrad",vm_field:"pasture_hectares_burnt",sortable:!0},urban_hectares_burnt:{text:"Ha urbanes cremades",api_field:"hanoforest",vm_field:"urban_hectares_burnt",sortable:!0},total_green_hectares_burnt:{text:"Ha verdes cremades",api_field:"haforestal",vm_field:"total_green_hectares_burnt",sortable:!0}},p=n(3),m=n(21),x=n(4),O=x.a.table(a||(a=Object(p.a)(["\n  border-collapse: collapse;\n  margin: 25px 0;\n  font-size: 0.9em;\n  font-family: sans-serif;\n  min-width: 400px;\n  box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);\n  &thead tr {\n    background-color: #009879;\n    color: #ffffff;\n    text-align: left;\n  }\n  & th {\n    cursor: pointer;\n    position: relative;\n  }\n  & th,\n  td {\n    padding: 12px 15px;\n  }\n  & tr {\n    border-bottom: 1px solid #ddd;\n  }\n  & tr:nth-of-type(even) {\n    background-color: #fbfbfb;\n  }\n  & tr:last-of-type {\n    border-bottom: 2px solid #009879;\n  }\n  & tr.active-row {\n    font-weight: bold;\n    color: #009879;\n  }\n"]))),g=x.a.i(r||(r=Object(p.a)(["\n  border: solid black;\n  border-width: 0 3px 3px 0;\n  position: absolute;\n  top: 40%;\n  right: 0;\n  padding: 3px;\n  /* margin-left: 10px; */\n"]))),v=Object(x.a)(g)(c||(c=Object(p.a)(["\n  transform: rotate(-135deg);\n  -webkit-transform: rotate(-135deg);\n"]))),y=Object(x.a)(g)(o||(o=Object(p.a)(["\n  transform: rotate(45deg);\n  -webkit-transform: rotate(45deg);\n"]))),k=function(e){var t=i.useState(0),n=Object(u.a)(t,2),a=n[0],r=n[1],c=e.fires,o=e.columns,s=e.onHeaderClick,d=e.orderedBy,l=e.orderAsc;return i.useEffect((function(){console.log(d)}),[d]),Object(f.jsxs)(O,{children:[Object(f.jsx)("thead",{children:Object(f.jsx)("tr",{children:o.map((function(e){return Object(f.jsxs)("th",{onClick:function(){return e.sortable&&s(e)},children:[e.text,d&&d.vm_field===e.vm_field&&(l?Object(f.jsx)(v,{}):Object(f.jsx)(y,{}))]},e.vm_field)}))})}),Object(f.jsx)("tbody",{children:c.map((function(e,t){return Object(f.jsx)("tr",{className:t===a?"active-row":"",onClick:function(){return r(t)},children:Object.keys(c[0]).map((function(n,a){return 0===a?Object(f.jsx)("td",{children:Object(m.a)(e[n],"dd-MMM-yyyy")},"fire-".concat(t,"-").concat(n)):Object(f.jsx)("td",{children:e[n]},"fire-".concat(t,"-").concat(n))}))},"fire-".concat(t))}))})]})},C=function(){var e=i.useState([]),t=Object(u.a)(e,2),n=t[0],a=t[1],r=i.useState(""),c=Object(u.a)(r,2),o=c[0],s=c[1],d=i.useState([]),l=Object(u.a)(d,2),p=l[0],m=l[1],x=i.useState(),O=Object(u.a)(x,2),g=O[0],v=O[1],y=i.useState(!0),C=Object(u.a)(y,2),E=C[0],w=C[1];i.useEffect((function(){""!==o&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;b("https://analisi.transparenciacatalunya.cat/resource/bks7-dkfd.json?".concat(""!==e?"$query=SELECT data_incendi, comarca, termemunic, haarbrades, hanoarbrad, hanoforest, haforestal WHERE date_extract_y(data_incendi)==".concat(e," ").concat(""!==t?"ORDER BY ".concat(t," ").concat(n?"ASC":"DESC"):""):""),a,r)}(o,null===g||void 0===g?void 0:g.api_field,E,(function(e){console.log(e),a(e.map((function(e){return{fire_date:new Date(e.data_incendi),region_name:e.comarca,municipality_name:e.termemunic,forest_hectares_burnt:parseInt(e.haarbrades),pasture_hectares_burnt:parseInt(e.hanoarbrad),urban_hectares_burnt:parseInt(e.hanoforest),total_green_hectares_burnt:parseInt(e.haforestal)}})))}),(function(e){return console.log(e)}))}),[E,g,o]),i.useEffect((function(){b("https://analisi.transparenciacatalunya.cat/resource/bks7-dkfd.json?$select=date_extract_y(data_incendi)%20as%20year&$group=year",(function(e){m(e.map((function(e){return e.year})))}),(function(e){return console.log(e)}))}),[]);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{children:p.length>0?Object(f.jsx)(j,{data:p,selectedValue:o,selectionTopic:"year",label:"Sel\xb7lecciona un any: ",onChangeEvent:function(e){return s(e.target.value)}}):Object(f.jsx)(h,{text:"loading ..."})}),Object(f.jsx)("div",{children:n.length>0?Object(f.jsx)(k,{columns:Object.values(_),fires:n,onHeaderClick:function(e){(null===g||void 0===g?void 0:g.api_field)!==e.api_field?(v(e),w(!0)):w(!E),console.log("headerClicked",e)},orderedBy:g,orderAsc:E}):Object(f.jsx)(h,{text:"Please, select a date."})})]})};var E=function(){return Object(f.jsx)(C,{})};l.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(E,{})}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.0f430272.chunk.js.map